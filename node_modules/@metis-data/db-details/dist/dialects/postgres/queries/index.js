"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.query2_get_tables_extra_data_from_pg_stats_extension = exports.query1_get_tables_rows_count_from_pg_class = void 0;
const query1_get_tables_rows_count_from_pg_class = `SELECT n.nspname AS schema_name, c.relname AS table_name, c.reltuples AS rows, c.relpages AS pages, c.oid AS relid
FROM pg_class c
JOIN pg_namespace n ON c.relnamespace = n.oid
WHERE c.relkind = 'r'`;
exports.query1_get_tables_rows_count_from_pg_class = query1_get_tables_rows_count_from_pg_class;
const query2_get_tables_extra_data_from_pg_stats_extension = `SELECT relid,
relname as table_name, 
(schemaname || '.' || relname) as full_table_name,
n_live_tup::INTEGER as rows,
n_dead_tup::INTEGER as dead_rows,
n_mod_since_analyze,
CASE
  WHEN n_live_tup = 0 THEN 0
  ELSE n_mod_since_analyze / n_live_tup
END AS pct_mod_since_analyze,
last_analyze as last_analyze_date,
last_autoanalyze as last_autoanalyze_date,
pg_total_relation_size(relid) / 1024 as total_table_size_kb, 
pg_table_size(relid) / 1024 as table_size_kb,
pg_indexes_size(relid) / 1024 as indexes_size_kb,
pg_size_pretty(pg_total_relation_size(relid)) as total_table_size_pretty, 
pg_size_pretty(pg_table_size(relid)) as table_size_pretty,
pg_size_pretty(pg_indexes_size(relid)) as index_size_pretty
FROM pg_stat_user_tables;`;
exports.query2_get_tables_extra_data_from_pg_stats_extension = query2_get_tables_extra_data_from_pg_stats_extension;
//# sourceMappingURL=index.js.map